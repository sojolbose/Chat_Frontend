(this.webpackJsonpchat_app=this.webpackJsonpchat_app||[]).push([[0],{124:function(e,n,t){},130:function(e,n,t){},131:function(e,n,t){},132:function(e,n,t){"use strict";t.r(n);var s=t(0),a=t.n(s),c=t(8),i=t.n(c),o=(t(89),t(54)),r=t.n(o),l=(t.p,t(124),t(37)),u=t.n(l),h=t(55),d=t(11),p=t(12),m=t(14),f=t(13),j=t(5),b=function(e){Object(m.a)(t,e);var n=Object(f.a)(t);function t(){var e;Object(d.a)(this,t);for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return(e=n.call.apply(n,[this].concat(a))).click=function(){e.props.onClick(e.props.id)},e}return Object(p.a)(t,[{key:"render",value:function(){return Object(j.jsx)("div",{className:"channel-item",onClick:this.click,children:Object(j.jsx)("div",{children:this.props.name})})}}]),t}(a.a.Component),g=function(e){Object(m.a)(t,e);var n=Object(f.a)(t);function t(){var e;Object(d.a)(this,t);for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return(e=n.call.apply(n,[this].concat(a))).handleClick=function(n){e.props.onSelectChannel(n)},e}return Object(p.a)(t,[{key:"render",value:function(){var e=this,n="There is no channels to show";return this.props.channels&&(n=this.props.channels.map((function(n){return Object(j.jsx)(b,{id:n.id,name:n.name,participants:n.participants,onClick:e.handleClick},n.id)}))),Object(j.jsx)("div",{className:"channel-list",children:n})}}]),t}(a.a.Component),v=function(e){Object(m.a)(t,e);var n=Object(f.a)(t);function t(){return Object(d.a)(this,t),n.apply(this,arguments)}return Object(p.a)(t,[{key:"render",value:function(){return Object(j.jsxs)("div",{className:"message-item",children:[Object(j.jsx)("div",{className:"message-sender",children:this.props.senderName}),Object(j.jsx)("span",{className:"message-text",children:this.props.text})]})}}]),t}(a.a.Component),O=t(161),x=t(159),k=t(162),C=function(e){Object(m.a)(t,e);var n=Object(f.a)(t);function t(){var e;return Object(d.a)(this,t),(e=n.call(this)).handleClick=function(){var n=e.state.inputRef.current.value;e.state.inputRef.current.value="",e.props.onSendMessage(n,e.props.socketID,e.props.senderName)},e.handleKeyPress=function(n){13===n.charCode&&(console.log("Enter pressed!!"),e.handleClick())},e.state={inputRef:a.a.createRef()},e}return Object(p.a)(t,[{key:"render",value:function(){console.log(this.props.messages);var e=Object(j.jsx)("div",{className:"no-content-message",children:"There is no messages to show"});return this.props.messages&&(e=this.props.messages.map((function(e){return Object(j.jsx)(v,{id:e.id,senderName:e.senderName,text:e.text},e.id)}))),Object(j.jsxs)("div",{className:"messages-panel",children:[Object(j.jsx)("div",{className:"messages-list",children:e}),Object(j.jsxs)(O.a,{className:"messages-input",children:[Object(j.jsx)(x.a,{inputRef:this.state.inputRef,id:"standard-basic",className:"message-input-text",type:"text",name:"message",onKeyPress:this.handleKeyPress}),Object(j.jsx)(k.a,{variant:"contained",color:"secondary",onClick:this.handleClick,children:"Send"})]})]})}}]),t}(a.a.Component),S=(t(130),function(e){Object(m.a)(t,e);var n=Object(f.a)(t);function t(){var e;return Object(d.a)(this,t),(e=n.call(this)).configureSocket=function(){var n=r()("http://localhost:8080");n.on("connection",(function(){e.handleLogin(e.props.username,n.id),e.loadChannels(),console.log(n.id),e.state.channel&&e.handleChannelSelect(e.state.channel.id)})),n.on("channel",(function(n){var t=e.state.channels;t.forEach((function(e){e.id===n.id&&(e.participants=n.participants,e.socket=n.socket)})),e.setState({channels:t})})),n.on("members-update",(function(n){e.setState({channels:n},(function(){console.log(e.state.channels)}))})),n.on("message",(function(n){var t=e.state.channels;t.forEach((function(e){e.id===n.channel_id&&(e.messages?e.messages.push(n):e.messages=[n])})),e.setState({channels:t})})),n.on("messages-update",(function(n){e.setState({messages:n})})),e.socket=n},e.handleChannelSelect=function(n){console.log("inside handle channnel");var t=e.state.channels.find((function(e){return e.id===n}));e.setState({channel:t},(function(){console.log(e.state)})),e.socket.emit("channel-join",n,(function(e){}))},e.handleLogin=function(n,t){e.setState({username:n}),console.log("inside handle login"),console.log(t),e.socket.emit("add-user",n,t,(function(e){}))},e.handleSendMessage=function(n,t,s){console.log(n),console.log(t),e.socket.emit("send-message",n,t,s,(function(e){}))},e.loadChannels=Object(h.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log("inside loadChannels"),fetch("http://localhost:8080/getChannels").then(function(){var n=Object(h.a)(u.a.mark((function n(t){var s;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.json();case 2:s=n.sent,console.log(s.channels),e.setState({channels:s.channels});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 2:case"end":return n.stop()}}),n)}))),e.state={username:null,channels:null,channel:null,messages:null},e}return Object(p.a)(t,[{key:"componentDidMount",value:function(){this.configureSocket()}},{key:"render",value:function(){return Object(j.jsxs)("div",{className:"chat-app",children:[Object(j.jsx)(g,{channels:this.state.channels,onSelectChannel:this.handleChannelSelect}),this.socket?Object(j.jsx)(C,{messages:this.state.messages,socketID:this.socket.id,onSendMessage:this.handleSendMessage,senderName:this.state.username}):null]})}}]),t}(a.a.Component)),y=(t(131),function(e){Object(m.a)(t,e);var n=Object(f.a)(t);function t(){var e;return Object(d.a)(this,t),(e=n.call(this)).handleChange=function(n){var t=n.target.value;e.setState({username:t},(function(){console.log(e.state)}))},e.handleSubmit=function(n){var t=e.state.inputRef.current.value;console.log(t),e.setState({username:t,submitted:!0})},e.handleKeyPress=function(n){13===n.charCode&&(console.log("Enter pressed!!"),e.handleSubmit())},e.state={username:"",submitted:!1,inputRef:a.a.createRef()},e}return Object(p.a)(t,[{key:"render",value:function(){return Object(j.jsxs)("div",{className:"main-container",children:[!1===this.state.submitted?Object(j.jsxs)(O.a,{className:"chat-login",children:[Object(j.jsx)(x.a,{inputRef:this.state.inputRef,id:"outlined-basic",onKeyPress:this.handleKeyPress,variant:"outlined",label:"Chat Alias",className:"inputUserName",type:"text",name:"username"}),Object(j.jsx)(k.a,{variant:"contained",color:"primary",onClick:this.handleSubmit,className:"submitUserName",children:"Enter Chat Room"})]}):null,this.state.submitted?Object(j.jsx)(S,{username:this.state.username}):null]})}}]),t}(a.a.Component));var N=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(y,{})})},R=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,165)).then((function(n){var t=n.getCLS,s=n.getFID,a=n.getFCP,c=n.getLCP,i=n.getTTFB;t(e),s(e),a(e),c(e),i(e)}))};i.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(N,{})}),document.getElementById("root")),R()},89:function(e,n,t){}},[[132,1,2]]]);
//# sourceMappingURL=main.520b16d9.chunk.js.map